resource "null_resource" "apply_kubectl_manifest" {
  provisioner "local-exec" {
    command = "kubectl apply -f manifest/random.yaml"
  }
  depends_on = [time_sleep.wait_30_seconds]
} 

resource "kubectl_manifest" "micro" {
  depends_on = [null_resource.apply_kubectl_manifest]
  yaml_body = file("manifest/random.yaml")
}
